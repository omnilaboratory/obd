## introduction

The gRPC service is a service offered in exclusive mode, which means the user must run an obd node locally, and he alone can access the node. The obd node supports both assets and BTC, and the service of BTC is provided by lnd (based on lnd's codebase).

For exclusive and non-custodial modes, please refer to the [Architecture section](https://omnilaboratory.github.io/obd/#/Architecture).


## mapping of asset related interfaces

(updated Jun 25, 2022, keep updating)

The new asset-related gRPC interfaces of an obd node are listed here, and other common/bitcoin interfaces are provided by the original code of lnd. 

**obd Interface**: the asset-related gRPC interface.  
**sub-service**: the service it belongs to.  
**Argument added**: the newly added arguments.  
**bitcoin-only lnd interface**: the doc link of the original lnd interface. 

**asset_id**: the asset id defined by Omnilayer is an unsigned 32-bit integer. If `asset_id = 0`, then OmniBOLT processes bitcoin transactions. Other assets, for example, `OMNI` has asset id 1, `USDT` has `asset_id` 31 on the mainnet, are generated by Omnilayer.  
**omniAmount**: is defined by Omnilayer, see [OmniBOLT spec 3](https://github.com/omnilaboratory/OmniBOLT-spec/blob/master/OmniBOLT-03-RSMC-and-OmniLayer-Transactions.md#string-to-int64)  


| obd interface	    |	sub service		        		|	Argument added	    |   Request/Response    |  bitcoin-only lnd interface   |  
| -------- 	        |	-----------------------		|	-------------------	|  -------------------	|  -------------------	        |   
| AddInvoice                	|	Lightning(lnrpc)		    | asset_id: uint32, <br> amount: omniAmount    | Request, Response | [https://api.lightning.community/#addinvoice](https://api.lightning.community/#addinvoice)      |
| ChannelBalance              |	Lightning(lnrpc)       |	asset_id: uint32          | Request           | [https://api.lightning.community/#channelbalance ](https://api.lightning.community/#channelbalance)   |
| OpenChannel 	              |	Lightning(lnrpc)		    |	 asset_id: uint32, <br> push_asset_sat:  int64(or omniAmount), local_funding_asset_amount:  int64(or omniAmount)          | Request           | [https://api.lightning.community/#openchannel](https://api.lightning.community/#openchannel)  |
| NewAddress 	                |	Lightning(lnrpc)		    |	 type: AddressType, <br> accoun: string         | Request           | [https://api.lightning.community/#newaddress](https://api.lightning.community/#newaddress)  |
| Sendpaymentv2 	            |	Router(lnrpc/routerrpc)		      |	asset_id : uint32, <br> asset_amt : int64(or omniAmount)            | Request,Response          | [https://api.lightning.community/#sendpaymentv2](https://api.lightning.community/#sendpaymentv2) |
